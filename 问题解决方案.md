# ğŸ”§ é—®é¢˜è§£å†³æ–¹æ¡ˆ

## é—®é¢˜æè¿°

åœ¨æŒ‰F5åˆ·æ–°Electronç•Œé¢æ—¶ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š
```
(node:8440) electron: Failed to load URL: http://127.0.0.1:5500/index.html with error: ERR_CONNECTION_REFUSED
```

## æ ¹æœ¬åŸå› 

æœ‰ä¸¤ä¸ªé—®é¢˜å¯¼è‡´äº†è¿™ä¸ªé”™è¯¯ï¼š

### 1. tsconfig.jsoné…ç½®ä¸å®Œæ•´
**é—®é¢˜**ï¼š`tsconfig.json` ç¼ºå°‘å…³é”®é…ç½®ï¼š
- æ²¡æœ‰ `outDir` æŒ‡å®šè¾“å‡ºç›®å½•
- æ²¡æœ‰ `include` æŒ‡å®šè¦ç¼–è¯‘çš„æ–‡ä»¶
- æ²¡æœ‰ `exclude` æ’é™¤ä¸éœ€è¦ç¼–è¯‘çš„ç›®å½•

**å½±å“**ï¼šTypeScriptç¼–è¯‘å™¨ä¸çŸ¥é“å°†ç¼–è¯‘åçš„æ–‡ä»¶è¾“å‡ºåˆ°å“ªé‡Œï¼Œå¯¼è‡´ä¿®æ”¹çš„ `index.ts` æ²¡æœ‰æ­£ç¡®ç¼–è¯‘åˆ° `dist/index.js`ã€‚

### 2. æ—§çš„ç¼–è¯‘æ–‡ä»¶æœªæ›´æ–°
**é—®é¢˜**ï¼š`dist/index.js` ä¿ç•™äº†æ—§ç‰ˆæœ¬çš„ç¡¬ç¼–ç URL (`http://127.0.0.1:5500/index.html`)

**å½±å“**ï¼šå³ä½¿ä¿®æ”¹äº†æºä»£ç  `index.ts` ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œä½†å®é™…è¿è¡Œçš„è¿˜æ˜¯æ—§çš„ç¼–è¯‘æ–‡ä»¶ã€‚

## è§£å†³æ­¥éª¤

### æ­¥éª¤1ï¼šä¿®å¤ tsconfig.json

**ä¿®æ”¹å‰ï¼š**
```json
{
  "compilerOptions": {
    "target": "ESNext",
    "module": "Node16",
    "moduleResolution": "Node16",
    "strict": true,
    "jsx": "preserve",
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "types": ["node"]
  }
}
```

**ä¿®æ”¹åï¼š**
```json
{
  "compilerOptions": {
    "target": "ESNext",
    "outDir": "./dist",         // æ·»åŠ ï¼šæŒ‡å®šè¾“å‡ºç›®å½•
    "module": "Node16",
    "moduleResolution": "Node16",
    "strict": true,
    "jsx": "preserve",
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "types": ["node"]
  },
  "include": ["index.ts", "src/**/*"],           // æ·»åŠ ï¼šåŒ…å«è¦ç¼–è¯‘çš„æ–‡ä»¶
  "exclude": ["node_modules", "dist", "web"]     // æ·»åŠ ï¼šæ’é™¤ä¸ç¼–è¯‘çš„ç›®å½•
}
```

### æ­¥éª¤2ï¼šåˆ é™¤æ—§çš„ç¼–è¯‘æ–‡ä»¶
```bash
del dist\index.js
```

### æ­¥éª¤3ï¼šé‡æ–°ç¼–è¯‘
```bash
npx tsc
```

### æ­¥éª¤4ï¼šéªŒè¯ç¼–è¯‘ç»“æœ
æ£€æŸ¥ `dist/index.js` ç¡®è®¤åŒ…å«æ­£ç¡®çš„ä»£ç ï¼š
```javascript
const config = loadConfig();
const onReady = () => {
    // ä»é…ç½®æ–‡ä»¶è¯»å–URL
    seerWindow = new SeerWindow(config.app.devServerUrl, {
        width: config.app.windowWidth,
        height: config.app.windowHeight,
        title: "æ˜“æ¸¸æ’ä»¶ç®¡ç†"
    });
};
```

### æ­¥éª¤5ï¼šé‡å¯Electron
```bash
npm run start
```

## éªŒè¯æ–¹æ³•

1. **æŸ¥çœ‹å¯åŠ¨æ—¥å¿—**ï¼šä¸åº”è¯¥å†æœ‰ `ERR_CONNECTION_REFUSED` é”™è¯¯
2. **æŒ‰F5åˆ·æ–°**ï¼šåº”è¯¥æ­£å¸¸åˆ·æ–°é¡µé¢ï¼Œæ˜¾ç¤ºVueåº”ç”¨
3. **æ£€æŸ¥å¼€å‘è€…å·¥å…·**ï¼šæŒ‰F12æ‰“å¼€ï¼ŒConsoleä¸­ä¸åº”æœ‰è¿æ¥é”™è¯¯

## é…ç½®è¯´æ˜

ç°åœ¨Electronä¼šä» `config.json` è¯»å–é…ç½®ï¼š
```json
{
  "app": {
    "windowWidth": 975,
    "windowHeight": 640,
    "devServerUrl": "http://localhost:5174",  // Vueå¼€å‘æœåŠ¡å™¨åœ°å€
    "productionIndex": "./dist-web/index.html"
  }
}
```

## æ³¨æ„äº‹é¡¹

1. **æ¯æ¬¡ä¿®æ”¹ `index.ts` åå¿…é¡»é‡æ–°ç¼–è¯‘**
   - è¿è¡Œ `npm run start` ä¼šè‡ªåŠ¨ç¼–è¯‘
   - æˆ–æ‰‹åŠ¨è¿è¡Œ `npx tsc`

2. **config.json å¿…é¡»åœ¨ dist ç›®å½•ä¸­**
   - `npm run start` è„šæœ¬å·²é…ç½®è‡ªåŠ¨å¤åˆ¶
   - å‘½ä»¤ï¼š`xcopy /Y config.json dist\`

3. **Vueå¼€å‘æœåŠ¡å™¨å¿…é¡»è¿è¡Œ**
   - åœ¨ç»ˆç«¯1è¿è¡Œï¼š`cd web && npm run dev`
   - ç¡®è®¤ç«¯å£ä¸config.jsonä¸­çš„ä¸€è‡´

4. **ç«¯å£å†²çªå¤„ç†**
   - å¦‚æœ5173è¢«å ç”¨ï¼ŒViteä¼šè‡ªåŠ¨ä½¿ç”¨5174æˆ–å…¶ä»–ç«¯å£
   - è®°å¾—æ›´æ–° `config.json` ä¸­çš„ `devServerUrl`

## å·¥ä½œæµç¨‹

### å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰

**ç»ˆç«¯1 - Vueå¼€å‘æœåŠ¡å™¨**ï¼š
```bash
cd web
npm run dev
# è®°å½•æ˜¾ç¤ºçš„ç«¯å£å·ï¼Œå¦‚ http://localhost:5174
```

**ç»ˆç«¯2 - Electronåº”ç”¨**ï¼š
```bash
# å¦‚æœç«¯å£å˜åŒ–ï¼Œå…ˆæ›´æ–° config.json
npm run start
```

### å¿«é€Ÿé‡å¯

å¦‚æœåªä¿®æ”¹äº†Vueä»£ç ï¼ˆweb/src/**ï¼‰ï¼š
- Vueä¼šè‡ªåŠ¨çƒ­é‡è½½ï¼Œæ— éœ€é‡å¯

å¦‚æœä¿®æ”¹äº†Electronä»£ç ï¼ˆindex.ts, src/**ï¼‰ï¼š
- å…³é—­Electronçª—å£
- é‡æ–°è¿è¡Œ `npm run start`

## ç›¸å…³æ–‡ä»¶

- `tsconfig.json` - TypeScriptç¼–è¯‘é…ç½®
- `config.json` - åº”ç”¨é…ç½®æ–‡ä»¶
- `index.ts` - Electronä¸»è¿›ç¨‹æºä»£ç 
- `dist/index.js` - ç¼–è¯‘åçš„ä¸»è¿›ç¨‹ä»£ç 
- `package.json` - npmè„šæœ¬é…ç½®

## é¢„é˜²æªæ–½

ä¸ºé¿å…ç±»ä¼¼é—®é¢˜ï¼š

1. âœ… ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†æ‰€æœ‰å¯å˜å‚æ•°
2. âœ… åœ¨ `package.json` ä¸­é…ç½®è‡ªåŠ¨åŒ–è„šæœ¬
3. âœ… æ­£ç¡®é…ç½® `tsconfig.json`
4. âœ… å¼€å‘æ—¶ä½¿ç”¨ `npm run start` ç¡®ä¿ç¼–è¯‘
5. âœ… å®šæœŸæ¸…ç† `dist` ç›®å½•

---

**é—®é¢˜è§£å†³æ—¶é—´**ï¼š2026å¹´2æœˆ6æ—¥  
**çŠ¶æ€**ï¼šâœ… å·²è§£å†³  
**ç‰ˆæœ¬**ï¼š1.0.0
