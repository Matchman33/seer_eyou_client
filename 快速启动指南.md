# 🚀 快速启动指南

## 当前项目状态

✅ **已完成的开发工作：**

1. ✅ 创建了配置文件 `config.json`
2. ✅ 创建了TypeScript类型定义 (`src/types/global.d.ts` 和 `web/src/types/global.d.ts`)
3. ✅ 开发了功能完整的Vue前端界面 (`web/src/App.vue`)
4. ✅ 修改了Electron主进程使用配置文件 (`index.ts`)
5. ✅ 优化了启动脚本 (`package.json`)

---

## 📋 当前运行状态

### Vue开发服务器
- **状态**: ✅ 正在运行
- **地址**: http://localhost:5174
- **端口**: 5174 (5173端口被占用，自动切换)

### Electron应用
- **状态**: ✅ 已启动
- **配置**: 已从 `config.json` 读取
- **前端URL**: http://localhost:5174

---

## 🎯 功能说明

### 前端界面功能

1. **连接管理**
   - 连接游戏按钮：连接到游戏服务器（端口3000）
   - 断开连接按钮：断开游戏连接
   - 清空日志按钮：清除所有日志和封包记录

2. **状态显示**
   - 连接状态指示器：显示是否已连接到游戏
   - 登录状态：显示用户是否已登录游戏

3. **封包监控**
   - 📥 接收的封包：实时显示从游戏接收的数据包
   - 📤 发送的封包：实时显示发送到游戏的数据包
   - 每个面板最多保留50条记录

4. **系统日志**
   - 实时显示系统操作日志
   - 不同类型的日志有不同颜色：
     - 🔵 信息 (info)
     - 🟢 成功 (success)
     - 🔴 错误 (error)
     - 🟡 警告 (warning)

### 键盘快捷键

- **F12**: 打开/关闭开发者工具
- **F5**: 刷新页面

---

## 🔧 如何启动项目

### 方式1：分别启动（推荐用于开发）

**终端1 - 启动Vue开发服务器：**
```bash
cd web
npm run dev
```

**终端2 - 启动Electron应用：**
```bash
npm run start
```

### 方式2：一键启动（需要先启动Vue服务器）

```bash
# 确保Vue开发服务器已在另一个终端运行
npm run start
```

---

## 📝 配置文件说明

`config.json` 包含所有应用配置：

```json
{
  "game": {
    "serverPort": 3000,        // 游戏服务器端口
    "serverHost": "127.0.0.1", // 游戏服务器地址
    "installPath": "D:\\SeerLauncher\\games\\NewSeer",  // 游戏安装路径
    "autoConnect": true        // 是否自动连接
  },
  "app": {
    "windowWidth": 975,        // 窗口宽度
    "windowHeight": 640,       // 窗口高度
    "devServerUrl": "http://localhost:5174",  // Vue开发服务器地址
    "productionIndex": "./dist-web/index.html"  // 生产环境HTML路径
  },
  "plugin": {
    "storePath": "./seer_magic",  // 插件存储路径
    "autoLoad": true,             // 是否自动加载插件
    "allowedExtensions": [".mjs"] // 允许的插件扩展名
  },
  "security": {
    "enableDevTools": true,       // 是否启用开发者工具
    "enableWebSecurity": true,    // 是否启用Web安全
    "enableSandbox": false        // 是否启用沙箱
  }
}
```

---

## 🎮 使用流程

### 1. 启动赛尔号游戏
首先确保赛尔号游戏已安装并启动。

### 2. 启动应用
按照上述方式启动Vue服务器和Electron应用。

### 3. 连接游戏
- 在Electron窗口中点击"连接游戏"按钮
- 观察状态栏，等待连接成功
- 连接成功后，状态指示器会显示"✅ 已连接"

### 4. 查看数据
- 登录游戏后，会显示"👤 已登录"
- 在游戏中进行操作，封包数据会实时显示在面板中
- 所有操作都会记录在系统日志中

### 5. 断开连接
- 点击"断开连接"按钮停止监控
- 点击"清空日志"清除历史记录

---

## 🔍 API使用示例

前端可以使用以下API（通过预加载脚本暴露）：

### 游戏客户端API
```typescript
// 创建游戏客户端
const gameClient = window.$game.newGameClient(3000, '127.0.0.1');

// 监听登录事件
gameClient.on('_onLoginCallback', (data) => {
  console.log('用户已登录:', data);
});

// 监听接收封包
gameClient.on('_onRecvCallback', (data) => {
  console.log('接收封包:', data);
});

// 监听发送封包
gameClient.on('_onSendCallback', (data) => {
  console.log('发送封包:', data);
});

// 检查登录状态
gameClient.emit('_is_login', {}, (res) => {
  console.log('登录状态:', res);
});

// 停止客户端
gameClient.stop();
```

### 文件操作API
```typescript
// 保存文件
await window.$win.saveSeerjsFile('test.mjs', 'console.log("test")');

// 读取文件
const content = await window.$win.readSeerjsFile('test.mjs');

// 读取所有文件
const files = await window.$win.readSeerjsFiles();

// 删除文件
await window.$win.deleteSeerjsFile('test.mjs');

// 重命名文件
await window.$win.renameSeerjsFile('old.mjs', 'new.mjs');
```

---

## 🐛 常见问题

### 问题1：Electron窗口白屏
**解决方案：**
- 确保Vue开发服务器正在运行
- 检查config.json中的端口号是否正确（当前为5174）
- 按F5刷新页面

### 问题2：连接游戏失败
**解决方案：**
- 确保赛尔号游戏已启动
- 检查游戏服务器端口（默认3000）是否正确
- 查看系统日志中的错误信息

### 问题3：看不到封包数据
**解决方案：**
- 确保已点击"连接游戏"按钮
- 确保游戏已登录（状态栏会显示"👤 已登录"）
- 在游戏中进行一些操作触发数据传输

### 问题4：端口被占用
**解决方案：**
- Vite会自动尝试其他端口（如5174、5175等）
- 更新config.json中的devServerUrl为新端口
- 重启Electron应用

---

## 📦 下一步开发建议

根据开发指南 (`开发指南与TODO清单.md`)，你可以继续完成：

### 优先级1（核心功能）
- [ ] 添加日志系统（winston）
- [ ] 实现插件列表管理界面
- [ ] 实现文件管理界面

### 优先级2（功能增强）
- [ ] 添加错误处理机制
- [ ] 添加超时和重连机制
- [ ] 创建自动部署DLL脚本

### 优先级3（优化改进）
- [ ] 添加单元测试
- [ ] 配置打包（electron-builder）
- [ ] 完善文档

---

## 📞 技术支持

- 查看 `开发指南与TODO清单.md` 获取详细开发指南
- 查看 `src/types/global.d.ts` 了解API类型定义
- 使用F12打开开发者工具调试问题

---

**最后更新时间**: 2026年2月6日  
**当前版本**: 1.0.0  
**开发状态**: 核心功能已完成 ✅

---

🎉 **恭喜！你的赛尔号易游插件管理器已经可以运行了！**
